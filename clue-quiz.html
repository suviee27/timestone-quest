<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>단서와 퀴즈</title>
  <link rel="stylesheet" href="main.css">
  <style>
    .container {
      display: none; /* 초기에는 모든 섹션 숨김 */
      margin: 20px auto;
      padding: 20px;
      background-color: #f8f9fa;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    h2 {
      font-size: 20px;
      margin-bottom: 15px;
    }

    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    .secondary-btn {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #6c757d;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .secondary-btn:hover {
      background-color: #5a6268;
    }
  </style>
</head>
<body>
  <!-- 1층 A: 신라관 -->
  <div id="1A-clue" class="container">
    <h2>1층 A: 신라관 (경비원들의 대화)</h2>
    <p>경비원들의 대화:</p>
    <p>"밤 순찰 경비원들의 대화 녹음: '어젯밤, 전시실 안쪽에서 이상한 걸 봤어...'"</p>
    <button class="secondary-btn" onclick="location.href='clue-list.html'">뒤로</button>
    <button onclick="nextStep('1A-quiz')">퀴즈로 이동</button>
  </div>

  <!-- 퀴즈 -->
  <div id="1A-quiz" class="container">
    <h2>퀴즈</h2>
    <p>신라 금관의 양쪽으로 늘어진 장식은 몇 개일까요?</p>
    <input type="text" id="answer1" placeholder="정답 입력">
    <button class="secondary-btn" onclick="previousStep('1A-clue')">뒤로</button>
    <button onclick="checkAnswer('answer1', '6', 'correct1', 'wrong1')">제출</button>
    <p id="wrong1" class="hint hidden" style="color: red;">틀렸습니다! 다시 시도해 보세요.</p>
    <div id="correct1" class="hidden">
      <p class="correct-text">정답입니다 🎉</p>
      <button class="btn" onclick="location.href='stone-result.html'">스톤 확인하기</button>
    </div>
  </div>

  <!-- 1층 B: 특별미션 -->
  <div id="1B-clue" class="container">
    <h2>1층 B: 특별미션</h2>
    <p>단체사진 미션</p>
    <button class="secondary-btn" onclick="location.href='clue-list.html'">뒤로</button>
    <button onclick="nextStep('1B-quiz')">퀴즈로 이동</button>
  </div>

  <script>
    // URL 파라미터 가져오기
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // 초기화: URL의 clue 파라미터를 읽어 해당 섹션 표시
    function initializePage() {
      const clueId = getQueryParam('clue'); // URL 파라미터 가져오기
      if (clueId && document.getElementById(clueId)) {
        document.getElementById(clueId).style.display = 'block'; // 해당 섹션 표시
      } else {
        alert('올바른 단서 ID가 아닙니다.');
        location.href = 'clue-list.html'; // 잘못된 경우 목록으로 돌아가기
      }
    }

    // 다음 단계로 이동
    function nextStep(stepId) {
      document.querySelectorAll('.container').forEach(div => (div.style.display = 'none'));
      document.getElementById(stepId).style.display = 'block';
    }

    // 이전 단계로 이동
    function previousStep(stepId) {
      nextStep(stepId);
    }

    // 정답 확인
    function checkAnswer(inputId, correctAnswer, correctId, wrongId) {
      const userAnswer = document.getElementById(inputId).value.trim();
      const correctDiv = document.getElementById(correctId);
      const wrongDiv = document.getElementById(wrongId);

      if (userAnswer === correctAnswer) {
        correctDiv.classList.remove('hidden');
        wrongDiv.classList.add('hidden');
      } else {
        correctDiv.classList.add('hidden');
        wrongDiv.classList.remove('hidden');
      }
    }

    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', initializePage);
  </script>
</body>
</html>